(function(){let e=document.createElement(`link`).relList;if(e&&e.supports&&e.supports(`modulepreload`))return;for(let e of document.querySelectorAll(`link[rel="modulepreload"]`))n(e);new MutationObserver(e=>{for(let t of e)if(t.type===`childList`)for(let e of t.addedNodes)e.tagName===`LINK`&&e.rel===`modulepreload`&&n(e)}).observe(document,{childList:!0,subtree:!0});function t(e){let t={};return e.integrity&&(t.integrity=e.integrity),e.referrerPolicy&&(t.referrerPolicy=e.referrerPolicy),e.crossOrigin===`use-credentials`?t.credentials=`include`:e.crossOrigin===`anonymous`?t.credentials=`omit`:t.credentials=`same-origin`,t}function n(e){if(e.ep)return;e.ep=!0;let n=t(e);fetch(e.href,n)}})();const e=[`1`,`2`,`3`,`4`,`5`,`6`,`7`,`8`,`9`],t=[`a`,`b`,`c`,`d`,`e`,`f`,`g`,`h`,`i`],n=[`restart`,`remove`,`Hint`],r=e=>({map:t=>r(t(e)),fold:t=>t(e)}),i=e=>[e.charCodeAt(0)-97,e.charCodeAt(1)-49],a=()=>{let n=0;return t.map(t=>e.map(e=>{let r=Math.floor(n/9),i=n%9,a=Math.floor(r/3)*3+Math.floor(i/3)+1;return n++,`${t}${e}${a}`})).flat()};function o(e){let t=new Map;for(let[n,r]of e.entries())t.has(r)||t.set(r,[]),t.get(r).push(n);let n=[];for(let e of t.values())e.length>1&&n.push(...e);return n}const s=e=>t=>a().map(n=>o(t(n,!0)).map(t=>{if(t){let n=e.cells.get(t);e.duplicates.set(t,`${n}`)}else e.duplicates.delete(t);return e.duplicates}).flat()).flat(),c=e=>{s(e)(p(e)),s(e)(m(e)),s(e)(h(e))},l=(e,t)=>{e.duplicates=new Map,e.targetKey&&(e.selected.map(n=>{e.originCell.get(n)!==`0`&&e.originCell.get(n)||(e.cells.set(n,`${t}`),e.userInput.set(n,`${t}`),T(e)&&(e.gameState=`isOvered`))}),e.highlight=g(e)(e.targetKey),c(e),k(e))},u=e=>{let t=a();return e.every(e=>e>=0&&e<=8)?t[9*e[0]+e[1]]:void 0};function d(e){let t,n=()=>(t===void 0&&(t=e()),t);return n.clear=()=>{t=void 0},n}const f=e=>(t,n=!1)=>r=>{let i=new Map;for(let[a,o]of e.cells)if(a[r]===t[r]){if(n&&o===`0`)continue;i.set(a,o)}return i},p=e=>(t,n=!1)=>f(e)(t,n)(0),m=e=>(t,n=!1)=>f(e)(t,n)(1),h=e=>(t,n=!1)=>f(e)(t,n)(2),g=e=>(t,n=!1)=>new Map([...p(e)(t,n),...m(e)(t,n),...h(e)(t,n)]),_=(e,t)=>[e.bounds().width*t[0]/9,e.bounds().height*t[1]/9],v=e=>[Math.ceil(e/3),(e-1)%3+1],y=e=>t=>{let{board:n}=e,r=n.firstChild;for(;r;){if(r.dataset.key?.startsWith(t))return r;r=r.nextSibling}return null};function b(e){let t=9*e[0]+e[1];return e.every(e=>e>=0&&e<=9)?a()[t]:void 0}const x=t.map((e,t)=>`${e}${t+1}`),S=e=>(t,n=9,r=9)=>{let i=Math.floor(n*(t[0]-e.left)/e.width),a=Math.floor(r*(t[1]-e.top)/e.height);return i>=0&&i<n&&a>=0&&a<=r?[i,a]:[-1,-1]},C=e=>e,w=()=>{let e=a().slice(0,3),t=new Map;return n.map((n,r)=>{let i=e[r];t.set(i,n)}),t},T=e=>{let{userInput:t,solutions:n}=e,r=n.keys(),i=!1;for(let e of r)if(t.get(e)===`0`)return!1;else i=!0;return i};function E(e){let t=document.getElementById(`container`);if(!t)throw Error(`Not HtmlElement found with id "container"`);let n=d(()=>t.getBoundingClientRect()),r=document.createElement(`board`);t.appendChild(r);let i=document.createElement(`numpad`);i.id=`numpad`;let a=document.createElement(`section`);a.id=`aside`;let o=document.createElement(`article`);return o.classList.add(`panel`),o.id=`panel`,a.appendChild(o),a.appendChild(i),t.appendChild(a),e={...e,board:r,numPad:i,bounds:n,container:t,panel:o,aside:a},e}function D(e){let{panel:t,buttons:n,bounds:r}=e;for(let[e,i]of n){let n=document.createElement(`button`);n.style.height=`${r().height/9}px`,n.style.width=`${r().width/3-1}px`,n.id=`${i.replace(/\s/g,`-`)}`.toLowerCase(),n.classList.add(e),n.innerText=`${i.replace(/\s/g,`-`)}`,n.style.aspectRatio=`1 / 1`,n.classList.add(`buttons`),t.append(n)}return e}function O(e){let{board:t}=e,n=document.createElement(`h1`);n.innerText=`Game Over`,n.style.width=`50%`,n.style.height=`50%`,n.style.transform=`translate(${e.bounds().width/2-90}px,${e.bounds().height/2+20}px)`,n.style.position=`absolute`,t.appendChild(n)}function k(e){return requestAnimationFrame(()=>{let{board:t,cells:n}=e;t.innerHTML=``,e.gameState===`isOvered`&&O(e);for(let[r,a]of n){let n=document.createElement(`cell`),o=_(e,i(r));n.style.transform=`translate(${o[0]}px, ${o[1]}px)`,n.style.position=`absolute`,n.style.height=`${e.bounds().height/9}px`,n.style.width=`${e.bounds().width/9}px`;for(let[t,i]of e.highlight)t===r&&n.classList.add(`highlighted`);if(e.selected.map(e=>{e===r&&(n.classList.remove(`highlighted`),n.classList.add(`selected`))}),e.duplicates.size>1)for(let[t,i]of e.duplicates)r===t&&(n.classList.remove(`highlighted`),n.classList.remove(`selected`),n.classList.add(`duplicates`));n.dataset.key=`${r}`,n.dataset.value=`${a}`,r.startsWith(`a`)||r.startsWith(`d`)||r.startsWith(`g`)?n.classList.add(`vertical-lines-left`):r.startsWith(`i`)&&n.classList.add(`vertical-lines-right`),(r[1]===`1`||r[1]===`4`||r[1]===`7`)&&n.classList.add(`horizontal-lines-top`),r[1]===`9`&&n.classList.add(`horizontal-lines-bottom`);let s=document.createElement(`p`);s.style.gridArea=`2 / 2 / 3 / 3`,a!==`0`&&(s.innerHTML=`${a}`),n.appendChild(s),t.appendChild(n),e.originCell.get(r)!==`0`&&e.originCell.get(r)?n.classList.add(`origin-cells`):(n.classList.remove(`origin-cells`),n.classList.add(`new-cells`)),(e.gameState===`isOvered`||e.gameState===`isPaused`)&&(n.style.opacity=`0.3`),A(e,n)}}),e}function A(e,t){let{hints:n}=e;return n=[...new Set(n)],n.map(e=>{let n=+e.slice(-1),r=e.slice(0,2);if(!t.dataset.key?.startsWith(r)||t.dataset.value!==`0`)return;let[i,a]=v(n),o=document.createElement(`hint`);o.style.gridColumn=`${a} / 3`,o.style.gridRow=`${i} / 3`,o.innerHTML=`${n}`,t?.appendChild(o)}),e}const j=e=>r(e).map(k).map(P).fold(C),M=e=>{let{bounds:t,numPad:n}=e;n.innerHTML=``,n.style.height=`${t().height/9}px`,n.style.maxWidth=`${t().width}px`;for(let[t,r]of e.digits){let e=document.createElement(`button`);e.classList.add(`num`),e.dataset.value=`${r}`,e.innerHTML=`${r}`,e.dataset.key=`${t}`,n.appendChild(e)}return e},N=e=>r(M(e)).map(I).fold(C),P=e=>r(e).map(N).map(D).map(z).fold(C),F=e=>{let{board:t}=e;return t.addEventListener(`pointerdown`,t=>{let{clientX:n,clientY:r}=t,i=b(S(e.bounds())([n,r]));if(!i)return;e.highlight=g(e)(i);let a=y(e)(i);if(a)if(a.dataset.value===`0`)t.ctrlKey?e.selected=[...new Set(e.selected),i]:e.selected=[i],e.isHold=!0,k(e);else{e.isDragging=!0,e.draggingElement=a,e.selected=[i],e.draggingElement.classList.add(`selected`);let t=e.draggingElement.dataset.value;if(!t)return;e.draggingValue=t}}),t.addEventListener(`pointerup`,n=>{let{clientX:r,clientY:i}=n;e.isHold=!1;let a=b(S(e.bounds())([r,i]));if(a){if(e.targetKey=a,e.selected.push(a),e.isDragging&&e.draggingElement){let n=e.draggingElement?.firstChild;e.draggingElement&&n&&(n.style.position=`unset`,n.style.transform=`unset`),e.draggingElement.classList.remove(`selected`),t.querySelectorAll(`.selected`).forEach(e=>e.classList.remove(`selected`));let r=e.draggingValue;if(e.isHint){let t=`${a.slice(0,2)}${r}`;e.hints.find(e=>t===e)?e.hints=[...new Set(e.hints.filter(e=>e!==t))]:e.selected.map(t=>{let n=t.slice(0,2)+r;e.hints=[...new Set([...e.hints,n])]})}else l(e,r)}e.draggingElement=void 0,e.isDragging=!1,e.draggingValue=void 0,k(e)}}),t.addEventListener(`pointermove`,t=>{let{clientX:n,clientY:r}=t;if(e.isHold){let t=b(S(e.bounds())([n,r]));if(!t)return;e.selected=[...new Set(e.selected),t],e.selected=[...new Set(e.selected)],k(e)}if(e.isDragging){let t=e.draggingElement?.firstChild;e.draggingElement&&t&&(t.style.position=`absolute`,t.style.transform=`translate(${n-e.draggingElement?.getBoundingClientRect().left-e.draggingElement?.getBoundingClientRect().width/3}px, ${r-e.draggingElement?.getBoundingClientRect().top-e.draggingElement?.getBoundingClientRect().height/3}px)`)}}),e},I=e=>{let{numPad:t}=e;return t.querySelectorAll(`*`).forEach(t=>{let n=t;n.addEventListener(`click`,()=>{let t=n.dataset.value;t&&(e.isHint?L(e)(t):l(e,t),k(e))})}),e},L=e=>t=>{let n=e.selected?.map(e=>`${e.slice(0,2)}${t}`),r=new Set([...n]);if(e.hints.filter(e=>r.has(e)).length>0){e.hints=e.hints.filter(e=>!r.has(e));return}e.hints=[...new Set([...e.hints,...n])],e.hints=[...new Set([...e.hints])],e.hints=[...e.hints,...new Set(n.filter((t,n)=>e.hints[n]==t))]};function R(e){return document.addEventListener(`keydown`,t=>{let n=t.key[0];if(n.match(/\d/))if(e.isHint){if(!e.targetKey)return;let t=`${e.targetKey.slice(0,2)}${n}`;e.hints.find(e=>t===e)?e.hints=[...new Set(e.hints.filter(e=>e!==t))]:e.selected.map(t=>{let r=t.slice(0,2)+n;e.hints=[...new Set([...e.hints,r])]})}else l(e,`${n}`);t.key===`h`&&(e.isHint=!e.isHint),k(e)}),e}function z(e){let{panel:t}=e;t.querySelector(`#restart`).addEventListener(`pointerdown`,()=>{document.location.reload()});let n=t.querySelector(`#hint`);return n.addEventListener(`pointerdown`,()=>{e.isHint=!e.isHint,e.isHint?n.classList.add(`btn-pressed`):n.classList.remove(`btn-pressed`)}),t.querySelector(`#remove`).addEventListener(`pointerdown`,()=>{e.isHint||e.selected.map(t=>{e.originCell.get(t)!==`0`||e.cells.set(t,`0`)});let t=e.selected.map(t=>e.hints.filter(e=>t.slice(0,2)===e.slice(0,2))).flat();e.hints=e.hints.filter(e=>!t.includes(e)),k(e)}),e}function B(e,t,n,r){for(let i=0;i<3;i++)for(let a=0;a<3;a++)if(e[t+i][n+a]===r)return!1;return!0}function V(e,t,n){let r;for(let i=0;i<3;i++)for(let a=0;a<3;a++){do r=Math.floor(Math.random()*9)+1;while(!B(e,t,n,r));e[t+i][n+a]=r}}function H(e,t,n){for(let r=0;r<9;r++)if(e[t][r]===n)return!1;return!0}function U(e,t,n){for(let r=0;r<9;r++)if(e[r][t]===n)return!1;return!0}function W(e,t,n,r){return H(e,t,r)&&U(e,n,r)&&B(e,t-t%3,n-n%3,r)}function G(e){for(let t=0;t<9;t+=3)V(e,t,t)}function K(e,t,n){if(t===9)return!0;if(n===9)return K(e,t+1,0);if(e[t][n]!==0)return K(e,t,n+1);for(let r=1;r<=9;r++)if(W(e,t,n,r)){if(e[t][n]=r,K(e,t,n+1))return!0;e[t][n]=0}return!1}function q(e,t){let n=new Map;for(;t>0;){let r=Math.floor(Math.random()*81),i=Math.floor(r/9),a=r%9;e[i][a]!==0&&(n.set(u([i,a]),e[i][a]),e[i][a]=0,t--)}return n}function J(e){let t=Array(9).fill(0).map(()=>Array(9).fill(0));return G(t),K(t,0,0),{grid:t,removed:q(t,e)}}function Y(){let e=new Map;return x.map((t,n)=>{let r=t,i=+(n+1);e.set(r,i)}),e}const X=()=>{let e=Z(),t=new Map([...e.cells]),n=new Map;return[...e.solutions.keys()].map(e=>n.set(e,`0`)),{gameState:`isInitialed`,cells:t,originCell:e.cells,selected:[],digits:Y(),hints:[],buttons:w(),isHint:!1,isDragging:!1,isHold:!1,highlight:new Map,duplicates:new Map,solutions:e.solutions,userInput:n}},Z=()=>{let e=new Map,t=J(40),n=t.grid.flat(),r=t.removed;return a().map((t,r)=>{let i=Math.floor(r/9),a=r%9,o=Math.floor(i/3)*3+Math.floor(a/3)+1,s=t.replace(/.$/,`${o}`);e.set(s,`${n[r]}`)}),{cells:e,solutions:r}};r(X()).map(E).map(j).map(F).map(R);